# Enable BPF and force the JIT compiler (default on most distros)
CONFIG_BPF_SYSCALL=y
CONFIG_BPF_JIT=y
CONFIG_BPF_JIT_ALWAYS_ON=y

# Enable BTF
CONFIG_DEBUG_INFO=y
CONFIG_DEBUG_INFO_BTF=y
CONFIG_DEBUG_INFO_REDUCED=n
CONFIG_DEBUG_INFO_DWARF4=y

# Enable securityfs
CONFIG_SECURITYFS=y

# Virtio options required by virtme
CONFIG_VIRTIO_PCI=y
CONFIG_NET_9P=y
CONFIG_NET_9P_VIRTIO=y
CONFIG_9P_FS=y
CONFIG_VIRTIO_NET=y
CONFIG_VIRTIO_CONSOLE=y
CONFIG_SCSI_VIRTIO=y

# Overlayfs is needed for mount namespace tests
CONFIG_OVERLAY_FS=y

# Enable cgroups and all subsystems
CONFIG_CGROUPS=y
CONFIG_BLK_CGROUP=y
CONFIG_CGROUP_SCHED=y
CONFIG_CGROUP_PIDS=y
CONFIG_CGROUP_RDMA=y
CONFIG_CGROUP_FREEZER=y
CONFIG_CGROUP_HUGETLB=y
CONFIG_CGROUP_DEVICE=y
CONFIG_CGROUP_CPUACCT=y
CONFIG_CGROUP_PERF=y
CONFIG_CGROUP_BPF=y
CONFIG_CGROUP_NET_PRIO=y
CONFIG_CGROUP_NET_CLASSID=y

# Enable ftrace (needed for fentry/fexit BPF programs)
CONFIG_FTRACE=y
CONFIG_FUNCTION_TRACER=y
CONFIG_KPROBES=y
CONFIG_KPROBES_ON_FTRACE=y
CONFIG_FTRACE_SYSCALLS=y
CONFIG_FPROBE=y

# Enable IPv6 (not on by default in aarch64 defconfig)
CONFIG_IPV6=y

# Enable taskstats (not on by default in aarch64 pre-5.18). This
# will create a taskstats_exit function (which we hook)
CONFIG_TASKSTATS=y
